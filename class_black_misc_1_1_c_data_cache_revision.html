<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>swift: BlackMisc::CDataCacheRevision Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">swift
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_black_misc.html">BlackMisc</a></li><li class="navelem"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html">CDataCacheRevision</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_black_misc_1_1_c_data_cache_revision-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BlackMisc::CDataCacheRevision Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Encapsulates metastate about how the version of the cache in memory compares to the one on disk.  
 <a href="class_black_misc_1_1_c_data_cache_revision.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ada8815061b692ccafe79aa19d333d278"><td class="memItemLeft" align="right" valign="top"><a id="ada8815061b692ccafe79aa19d333d278"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#ada8815061b692ccafe79aa19d333d278">CDataCacheRevision</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;basename)</td></tr>
<tr class="memdesc:ada8815061b692ccafe79aa19d333d278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct the single instance of the revision metastate. <br /></td></tr>
<tr class="separator:ada8815061b692ccafe79aa19d333d278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228378bf83252af730629f7a6cc5675f"><td class="memItemLeft" align="right" valign="top"><a id="a228378bf83252af730629f7a6cc5675f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a228378bf83252af730629f7a6cc5675f">~CDataCacheRevision</a> ()</td></tr>
<tr class="memdesc:a228378bf83252af730629f7a6cc5675f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a228378bf83252af730629f7a6cc5675f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a238e1be0bff221a1d67dcb59428badf9"><td class="memItemLeft" align="right" valign="top">LockGuard&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a238e1be0bff221a1d67dcb59428badf9">beginUpdate</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qmap.html">QMap</a>&lt; <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a>, qint64 &gt; &amp;timestamps, bool updateUuid=true, bool pinsOnly=false)</td></tr>
<tr class="memdesc:a238e1be0bff221a1d67dcb59428badf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the state of the disk cache, and prepare to update any values which are out of date. Return value can be converted to bool, false means update is not started (error, or already up-to-date).  <a href="class_black_misc_1_1_c_data_cache_revision.html#a238e1be0bff221a1d67dcb59428badf9">More...</a><br /></td></tr>
<tr class="separator:a238e1be0bff221a1d67dcb59428badf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a363eed1b67f004613dc71cf055c1f4c8"><td class="memItemLeft" align="right" valign="top"><a id="a363eed1b67f004613dc71cf055c1f4c8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a363eed1b67f004613dc71cf055c1f4c8">writeNewRevision</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qmap.html">QMap</a>&lt; <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a>, qint64 &gt; &amp;timestamps, const <a class="elRef" href="http://doc.qt.io/qt-5/qset.html">QSet</a>&lt; <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &gt; &amp;excludeKeys={})</td></tr>
<tr class="memdesc:a363eed1b67f004613dc71cf055c1f4c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">During update, writes a new revision file with new timestamps. <br /></td></tr>
<tr class="separator:a363eed1b67f004613dc71cf055c1f4c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a35892b4da413c52e4db46d1a99683e"><td class="memItemLeft" align="right" valign="top"><a id="a7a35892b4da413c52e4db46d1a99683e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a7a35892b4da413c52e4db46d1a99683e">regenerate</a> (const <a class="el" href="class_black_misc_1_1_c_value_cache_packet.html">CValueCachePacket</a> &amp;keys)</td></tr>
<tr class="memdesc:a7a35892b4da413c52e4db46d1a99683e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a new revision file with keys deduced from the available JSON files. <br /></td></tr>
<tr class="separator:a7a35892b4da413c52e4db46d1a99683e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f73c536879c92e26264e16de25cf46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a16f73c536879c92e26264e16de25cf46">finishUpdate</a> (bool keepPromises=false)</td></tr>
<tr class="memdesc:a16f73c536879c92e26264e16de25cf46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the revision file lock and mark everything up-to-date (called by LockGuard destructor).  <a href="class_black_misc_1_1_c_data_cache_revision.html#a16f73c536879c92e26264e16de25cf46">More...</a><br /></td></tr>
<tr class="separator:a16f73c536879c92e26264e16de25cf46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5f5070573a33ff7e517c46798925532"><td class="memItemLeft" align="right" valign="top"><a id="af5f5070573a33ff7e517c46798925532"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#af5f5070573a33ff7e517c46798925532">isFound</a> () const</td></tr>
<tr class="memdesc:af5f5070573a33ff7e517c46798925532"><td class="mdescLeft">&#160;</td><td class="mdescRight">Existing revision file was found. <br /></td></tr>
<tr class="separator:af5f5070573a33ff7e517c46798925532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39bda8f56131f7e91db2e14844e09d3f"><td class="memItemLeft" align="right" valign="top"><a id="a39bda8f56131f7e91db2e14844e09d3f"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a39bda8f56131f7e91db2e14844e09d3f">isPendingRead</a> () const</td></tr>
<tr class="memdesc:a39bda8f56131f7e91db2e14844e09d3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if beginUpdate found some values with timestamps newer than in memory. <br /></td></tr>
<tr class="separator:a39bda8f56131f7e91db2e14844e09d3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7295a8f44bf9471b488106d6bd9c9d"><td class="memItemLeft" align="right" valign="top"><a id="aef7295a8f44bf9471b488106d6bd9c9d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#aef7295a8f44bf9471b488106d6bd9c9d">notifyPendingWrite</a> ()</td></tr>
<tr class="memdesc:aef7295a8f44bf9471b488106d6bd9c9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call before beginUpdate if there is a write pending, so update will start even if there is nothing to read. <br /></td></tr>
<tr class="separator:aef7295a8f44bf9471b488106d6bd9c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdee9edba23292ff0a36739d62961fdf"><td class="memItemLeft" align="right" valign="top"><a id="abdee9edba23292ff0a36739d62961fdf"></a>
<a class="elRef" href="http://doc.qt.io/qt-5/qset.html">QSet</a>&lt; <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#abdee9edba23292ff0a36739d62961fdf">keysWithNewerTimestamps</a> () const</td></tr>
<tr class="memdesc:abdee9edba23292ff0a36739d62961fdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">During update, returns keys which have on-disk timestamps newer than in-memory. Guaranteed not empty. <br /></td></tr>
<tr class="separator:abdee9edba23292ff0a36739d62961fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ca1810f6356d6afef01b872eb81e619"><td class="memItemLeft" align="right" valign="top"><a id="a5ca1810f6356d6afef01b872eb81e619"></a>
const <a class="elRef" href="http://doc.qt.io/qt-5/qmap.html">QMap</a>&lt; <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a>, qint64 &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a5ca1810f6356d6afef01b872eb81e619">newerTimestamps</a> () const</td></tr>
<tr class="memdesc:a5ca1810f6356d6afef01b872eb81e619"><td class="mdescLeft">&#160;</td><td class="mdescRight">During update, returns timestamps which have on-disk timestamps newer than in-memory. Guaranteed not empty. <br /></td></tr>
<tr class="separator:a5ca1810f6356d6afef01b872eb81e619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ffbbc908df2272a05462cd0d8d8c992"><td class="memItemLeft" align="right" valign="top"><a id="a0ffbbc908df2272a05462cd0d8d8c992"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a0ffbbc908df2272a05462cd0d8d8c992">isNewerValueAvailable</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;key, qint64 timestamp)</td></tr>
<tr class="memdesc:a0ffbbc908df2272a05462cd0d8d8c992"><td class="mdescLeft">&#160;</td><td class="mdescRight">During update, returns true if the on-disk timestamp of this key is newer than in-memory. <br /></td></tr>
<tr class="separator:a0ffbbc908df2272a05462cd0d8d8c992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4adc5f4df2d61c9b7b7c717f4f2938a3"><td class="memItemLeft" align="right" valign="top"><a id="a4adc5f4df2d61c9b7b7c717f4f2938a3"></a>
std::future&lt; void &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a4adc5f4df2d61c9b7b7c717f4f2938a3">promiseLoadedValue</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;key, qint64 currentTimestamp)</td></tr>
<tr class="memdesc:a4adc5f4df2d61c9b7b7c717f4f2938a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a future which will be made ready when the value is loaded. Future is invalid if value is not loading. <br /></td></tr>
<tr class="separator:a4adc5f4df2d61c9b7b7c717f4f2938a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5253153dedc49162a6b300094280ab9e"><td class="memItemLeft" align="right" valign="top"><a id="a5253153dedc49162a6b300094280ab9e"></a>
std::vector&lt; std::promise&lt; void &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a5253153dedc49162a6b300094280ab9e">loadedValuePromises</a> ()</td></tr>
<tr class="memdesc:a5253153dedc49162a6b300094280ab9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns (by move) the container of promises to load values. <br /></td></tr>
<tr class="separator:a5253153dedc49162a6b300094280ab9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacb58f3165b2b9424718b041d148fceb"><td class="memItemLeft" align="right" valign="top"><a id="aacb58f3165b2b9424718b041d148fceb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#aacb58f3165b2b9424718b041d148fceb">breakPromises</a> ()</td></tr>
<tr class="memdesc:aacb58f3165b2b9424718b041d148fceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abandon all promises. <br /></td></tr>
<tr class="separator:aacb58f3165b2b9424718b041d148fceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c35ee97ea2f2e6222d52d0a6ca602aa"><td class="memItemLeft" align="right" valign="top"><a id="a4c35ee97ea2f2e6222d52d0a6ca602aa"></a>
<a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a4c35ee97ea2f2e6222d52d0a6ca602aa">timestampsAsString</a> () const</td></tr>
<tr class="memdesc:a4c35ee97ea2f2e6222d52d0a6ca602aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Keys with timestamps. <br /></td></tr>
<tr class="separator:a4c35ee97ea2f2e6222d52d0a6ca602aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ddfadae1d5096017cf04cc7e71cf1f"><td class="memItemLeft" align="right" valign="top"><a id="a24ddfadae1d5096017cf04cc7e71cf1f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a24ddfadae1d5096017cf04cc7e71cf1f">setTimeToLive</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;key, int ttl)</td></tr>
<tr class="memdesc:a24ddfadae1d5096017cf04cc7e71cf1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set TTL value that will be written to the revision file. <br /></td></tr>
<tr class="separator:a24ddfadae1d5096017cf04cc7e71cf1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77f8945e24cc9e3448f8b441edd6879d"><td class="memItemLeft" align="right" valign="top"><a id="a77f8945e24cc9e3448f8b441edd6879d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a77f8945e24cc9e3448f8b441edd6879d">overrideTimestamp</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;key, qint64 timestamp)</td></tr>
<tr class="memdesc:a77f8945e24cc9e3448f8b441edd6879d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Causes the new timestamp to be written to the revision file. <br /></td></tr>
<tr class="separator:a77f8945e24cc9e3448f8b441edd6879d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513c266b9ec59abdcd342aab01054188"><td class="memItemLeft" align="right" valign="top"><a id="a513c266b9ec59abdcd342aab01054188"></a>
qint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a513c266b9ec59abdcd342aab01054188">getTimestampOnDisk</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;key)</td></tr>
<tr class="memdesc:a513c266b9ec59abdcd342aab01054188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the revision file to get a timestamp. <br /></td></tr>
<tr class="separator:a513c266b9ec59abdcd342aab01054188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0214acc9f54ae75b346344622dbf63db"><td class="memItemLeft" align="right" valign="top"><a id="a0214acc9f54ae75b346344622dbf63db"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a0214acc9f54ae75b346344622dbf63db">pinValue</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;key)</td></tr>
<tr class="memdesc:a0214acc9f54ae75b346344622dbf63db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the flag which will cause the value to be pre-loaded. <br /></td></tr>
<tr class="separator:a0214acc9f54ae75b346344622dbf63db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c5acfc8279a54a7bf629624255b6d86"><td class="memItemLeft" align="right" valign="top"><a id="a2c5acfc8279a54a7bf629624255b6d86"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a2c5acfc8279a54a7bf629624255b6d86">deferValue</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;key)</td></tr>
<tr class="memdesc:a2c5acfc8279a54a7bf629624255b6d86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the flag which will cause the value to be deferred-loaded. <br /></td></tr>
<tr class="separator:a2c5acfc8279a54a7bf629624255b6d86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a9afe1bbc920fffe3551c5245e7c9ca"><td class="memItemLeft" align="right" valign="top"><a id="a5a9afe1bbc920fffe3551c5245e7c9ca"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a5a9afe1bbc920fffe3551c5245e7c9ca">admitValue</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;key)</td></tr>
<tr class="memdesc:a5a9afe1bbc920fffe3551c5245e7c9ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the flag which will cause a deferred-load value to be loaded. <br /></td></tr>
<tr class="separator:a5a9afe1bbc920fffe3551c5245e7c9ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5126fd40ad11984c349fcd3d7ad3903"><td class="memItemLeft" align="right" valign="top"><a id="aa5126fd40ad11984c349fcd3d7ad3903"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#aa5126fd40ad11984c349fcd3d7ad3903">sessionValue</a> (const <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a> &amp;key)</td></tr>
<tr class="memdesc:aa5126fd40ad11984c349fcd3d7ad3903"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the flag which will cause a value to be reset when starting a new session. <br /></td></tr>
<tr class="separator:aa5126fd40ad11984c349fcd3d7ad3903"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a34dedafbf72dd61758cb27d9bc2c6a53"><td class="memItemLeft" align="right" valign="top"><a id="a34dedafbf72dd61758cb27d9bc2c6a53"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a34dedafbf72dd61758cb27d9bc2c6a53">CDataCacheRevision</a> (const <a class="el" href="class_black_misc_1_1_c_data_cache_revision.html">CDataCacheRevision</a> &amp;)=delete</td></tr>
<tr class="memdesc:a34dedafbf72dd61758cb27d9bc2c6a53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Non-copyable. <br /></td></tr>
<tr class="separator:a34dedafbf72dd61758cb27d9bc2c6a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f87ffc84baad391afea7fbc62381970"><td class="memItemLeft" align="right" valign="top"><a id="a4f87ffc84baad391afea7fbc62381970"></a>
<a class="el" href="class_black_misc_1_1_c_data_cache_revision.html">CDataCacheRevision</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_black_misc_1_1_c_data_cache_revision.html#a4f87ffc84baad391afea7fbc62381970">operator=</a> (const <a class="el" href="class_black_misc_1_1_c_data_cache_revision.html">CDataCacheRevision</a> &amp;)=delete</td></tr>
<tr class="memdesc:a4f87ffc84baad391afea7fbc62381970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Non-copyable. <br /></td></tr>
<tr class="separator:a4f87ffc84baad391afea7fbc62381970"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Encapsulates metastate about how the version of the cache in memory compares to the one on disk. </p>
<dl class="section remark"><dt>Remarks</dt><dd>This function is thread safe. </dd></dl>

<p class="definition">Definition at line <a class="el" href="datacache_8h_source.html#l00080">80</a> of file <a class="el" href="datacache_8h_source.html">datacache.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a238e1be0bff221a1d67dcb59428badf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a238e1be0bff221a1d67dcb59428badf9">&#9670;&nbsp;</a></span>beginUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LockGuard BlackMisc::CDataCacheRevision::beginUpdate </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="http://doc.qt.io/qt-5/qmap.html">QMap</a>&lt; <a class="elRef" href="http://doc.qt.io/qt-5/qstring.html">QString</a>, qint64 &gt; &amp;&#160;</td>
          <td class="paramname"><em>timestamps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>updateUuid</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pinsOnly</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the state of the disk cache, and prepare to update any values which are out of date. Return value can be converted to bool, false means update is not started (error, or already up-to-date). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timestamps</td><td>Current in-memory timestamps, to be compared with the on-disk ones. </td></tr>
    <tr><td class="paramname">updateUuid</td><td>Whether to prepare for an actual update, or just interrograte whether one is needed. </td></tr>
    <tr><td class="paramname">pinsOnly</td><td>Only load pinned values. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a16f73c536879c92e26264e16de25cf46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16f73c536879c92e26264e16de25cf46">&#9670;&nbsp;</a></span>finishUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlackMisc::CDataCacheRevision::finishUpdate </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>keepPromises</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release the revision file lock and mark everything up-to-date (called by LockGuard destructor). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keepPromises</td><td>Don't break pending promises. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/blackmisc/<a class="el" href="datacache_8h_source.html">datacache.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Dec 3 2023 18:38:47 for swift by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
