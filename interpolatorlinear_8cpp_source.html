<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>swift: src/blackmisc/simulation/interpolatorlinear.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">swift
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_9687d2aaac47be79d7525830e55feee8.html">blackmisc</a></li><li class="navelem"><a class="el" href="dir_cd2f2d0ca211e9845f9d0ff4817a2bb1.html">simulation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">interpolatorlinear.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// SPDX-FileCopyrightText: Copyright (C) 2014 swift Project Community / Contributors</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// SPDX-License-Identifier: GPL-3.0-or-later OR LicenseRef-swift-pilot-client-1</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="interpolatorlinear_8h.html">blackmisc/simulation/interpolatorlinear.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="interpolatorfunctions_8h.html">blackmisc/simulation/interpolatorfunctions.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="aircraftsituationlist_8h.html">blackmisc/aviation/aircraftsituationlist.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="altitude_8h.html">blackmisc/aviation/altitude.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="coordinategeodetic_8h.html">blackmisc/geo/coordinategeodetic.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="length_8h.html">blackmisc/pq/length.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="physicalquantity_8h.html">blackmisc/pq/physicalquantity.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="logmessage_8h.html">blackmisc/logmessage.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mixincompare_8h.html">blackmisc/mixin/mixincompare.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="verify_8h.html">blackmisc/verify.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="range_8h.html">blackmisc/range.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sequence_8h.html">blackmisc/sequence.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="statusmessage_8h.html">blackmisc/statusmessage.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="buildconfig_8h.html">blackconfig/buildconfig.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;QDateTime&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;QList&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using namespace </span>BlackConfig;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using namespace </span>BlackMisc::Aviation;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using namespace </span>BlackMisc::Geo;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using namespace </span>BlackMisc::Math;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span>BlackMisc::PhysicalQuantities;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using namespace </span>BlackMisc::Simulation;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">namespace </span>BlackMisc::Simulation</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a8d964f10654b84fa5888a4c7549107d3">   32</a></span>&#160;    CInterpolatorLinear::CInterpolant::CInterpolant(<span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> &amp;oldSituation) : <a class="code" href="class_black_misc_1_1_simulation_1_1_i_interpolant.html">IInterpolant</a>(1, <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_pbh.html">CInterpolatorPbh</a>(0, oldSituation, oldSituation)),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                                                                              m_oldSituation(oldSituation)</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    {}</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a50911b04c185172972573597107ae494">   36</a></span>&#160;    <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a08625e48c29fe0044e3ea6d27240760c">CInterpolatorLinear::CInterpolant::CInterpolant</a>(<span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> &amp;oldSituation, <span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_pbh.html">CInterpolatorPbh</a> &amp;pbh) : <a class="code" href="class_black_misc_1_1_simulation_1_1_i_interpolant.html">IInterpolant</a>(1, pbh),</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                                                                                                           m_oldSituation(oldSituation)</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    {}</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a0e635b652225ee22b4b414c5d5edc8ae">   40</a></span>&#160;    <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a08625e48c29fe0044e3ea6d27240760c">CInterpolatorLinear::CInterpolant::CInterpolant</a>(<span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> &amp;oldSituation, <span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> &amp;newSituation, <span class="keywordtype">double</span> timeFraction, qint64 interpolatedTime) : <a class="code" href="class_black_misc_1_1_simulation_1_1_i_interpolant.html">IInterpolant</a>(interpolatedTime, 2),</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                                                                                                                                                                    m_oldSituation(oldSituation), m_newSituation(newSituation),</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                                                                                                                                                                                    m_simulationTimeFraction(timeFraction)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <a class="code" href="class_black_misc_1_1_simulation_1_1_i_interpolant.html#aec959c740235d091e11bb0e7b8e9becb">m_pbh</a> = <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_pbh.html">CInterpolatorPbh</a>(m_simulationTimeFraction, oldSituation, newSituation);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordtype">void</span> CInterpolatorLinear::anchor()</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    {}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a8f132cd55b91b41ea95c4bd54967089e">   50</a></span>&#160;    <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a8f132cd55b91b41ea95c4bd54967089e">CInterpolatorLinear::CInterpolant::interpolatePositionAndAltitude</a>(<span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> &amp;situation, <span class="keywordtype">bool</span> interpolateGndFactor)<span class="keyword"> const</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keyword">const</span> std::array&lt;double, 3&gt; oldVec(m_oldSituation.getPosition().normalVectorDouble());</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keyword">const</span> std::array&lt;double, 3&gt; newVec(m_newSituation.getPosition().normalVectorDouble());</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">if</span> (CBuildConfig::isLocalDeveloperDebugBuild())</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <a class="code" href="verify_8h.html#a720f9510406624948c10311879e88e17">BLACK_VERIFY_X</a>(CAircraftSituation::isValidVector(oldVec), Q_FUNC_INFO, <span class="stringliteral">&quot;Invalid old vector&quot;</span>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <a class="code" href="verify_8h.html#a720f9510406624948c10311879e88e17">BLACK_VERIFY_X</a>(CAircraftSituation::isValidVector(newVec), Q_FUNC_INFO, <span class="stringliteral">&quot;Invalid new vector&quot;</span>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <a class="code" href="verify_8h.html#a720f9510406624948c10311879e88e17">BLACK_VERIFY_X</a>(<a class="code" href="interpolatorfunctions_8h.html#aaccfd87f8e523ec78e59fbe4a7bf6ed1">isAcceptableTimeFraction</a>(m_simulationTimeFraction), Q_FUNC_INFO, <span class="stringliteral">&quot;Invalid fraction&quot;</span>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="comment">// Interpolate position: pos = (posB - posA) * t + posA</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="class_black_misc_1_1_geo_1_1_c_coordinate_geodetic.html">CCoordinateGeodetic</a> newPosition;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> tf = <a class="code" href="interpolatorfunctions_8h.html#a57fda3473712311e6d1d58a44ab1c5d6">clampValidTimeFraction</a>(m_simulationTimeFraction);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        newPosition.<a class="code" href="class_black_misc_1_1_geo_1_1_c_coordinate_geodetic.html#a1791f565bcc91e7aecccaff0948e3c38">setNormalVector</a>((newVec[0] - oldVec[0]) * tf + oldVec[0],</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                    (newVec[1] - oldVec[1]) * tf + oldVec[1],</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                    (newVec[2] - oldVec[2]) * tf + oldVec[2]);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">if</span> (CBuildConfig::isLocalDeveloperDebugBuild())</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <a class="code" href="verify_8h.html#a720f9510406624948c10311879e88e17">BLACK_VERIFY_X</a>(newPosition.<a class="code" href="class_black_misc_1_1_geo_1_1_i_coordinate_geodetic.html#ac0ee15bb11f496969f5a523497a13824">isValidVectorRange</a>(), Q_FUNC_INFO, <span class="stringliteral">&quot;Invalid vector&quot;</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="comment">// Interpolate altitude: Alt = (AltB - AltA) * t + AltA</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="comment">// avoid underflow below ground elevation by using getCorrectedAltitude</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_altitude.html">CAltitude</a> oldAlt(m_oldSituation.getCorrectedAltitude());</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_altitude.html">CAltitude</a> newAlt(m_newSituation.getCorrectedAltitude());</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        Q_ASSERT_X(oldAlt.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_altitude.html#acd8f6331ff366a7ca5c8c2117bb462a2">getReferenceDatum</a>() == CAltitude::MeanSeaLevel &amp;&amp; oldAlt.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_altitude.html#acd8f6331ff366a7ca5c8c2117bb462a2">getReferenceDatum</a>() == newAlt.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_altitude.html#acd8f6331ff366a7ca5c8c2117bb462a2">getReferenceDatum</a>(), Q_FUNC_INFO, <span class="stringliteral">&quot;mismatch in reference&quot;</span>); <span class="comment">// otherwise no calculation is possible</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_altitude.html">CAltitude</a> altitude((newAlt - oldAlt) * tf + oldAlt,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                 oldAlt.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_altitude.html#acd8f6331ff366a7ca5c8c2117bb462a2">getReferenceDatum</a>());</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> newSituation(situation);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        newSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#ab4ed2995ac0c67a2baf7e62029584c2a">setPosition</a>(newPosition);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        newSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a4caaad75e021a0886dadbe0cc7f7a764">setAltitude</a>(altitude);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        newSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_based.html#a5a14940bef7bdb064be61c51990b1d49">setMSecsSinceEpoch</a>(this-&gt;getInterpolatedTime());</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">if</span> (interpolateGndFactor)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">double</span> oldGroundFactor = m_oldSituation.getOnGroundFactor();</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">double</span> newGroundFactor = m_newSituation.getOnGroundFactor();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">do</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <span class="keywordflow">if</span> (CAircraftSituation::isGfEqualAirborne(oldGroundFactor, newGroundFactor))</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    newSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a82086dbfde39ef807697e67ae601ea32">setOnGround</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                <span class="keywordflow">if</span> (CAircraftSituation::isGfEqualOnGround(oldGroundFactor, newGroundFactor))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                    newSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a82086dbfde39ef807697e67ae601ea32">setOnGround</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">double</span> groundFactor = (newGroundFactor - oldGroundFactor) * tf + oldGroundFactor;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                newSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#aec3b4b98a9ebc1ce6a00dda39cd976b0">setOnGroundFactor</a>(groundFactor);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                newSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a8026481ec69927e07eefca92a24a3dff">setOnGroundFromGroundFactorFromInterpolation</a>(<a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#a5a93002b01193061db4ea1ae334faa92">groundInterpolationFactor</a>());</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="keywordflow">while</span> (<span class="keyword">false</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">return</span> newSituation;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear.html#ae2619f905243c3f9cfbbb3470f28ae79">  112</a></span>&#160;    <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html">CInterpolatorLinear::CInterpolant</a> <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear.html#ae2619f905243c3f9cfbbb3470f28ae79">CInterpolatorLinear::getInterpolant</a>(<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html">SituationLog</a> &amp;log)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="comment">// set default situations</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> oldSituation = m_interpolant.<a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a4471c241d6980948c7d4b3d2c648e2b7">getOldSituation</a>();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> newSituation = m_interpolant.<a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a3dd85a466ed567366820d57806296eee">getNewSituation</a>();</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        Q_ASSERT_X(newSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a948bd927b80c9162e07fe063449acc9f">getAdjustedMSecsSinceEpoch</a>() &gt;= oldSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a948bd927b80c9162e07fe063449acc9f">getAdjustedMSecsSinceEpoch</a>(), Q_FUNC_INFO, <span class="stringliteral">&quot;Wrong order&quot;</span>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> updated = <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#a901899e236b5d1ad0d536bc5cb551db7">m_situationsLastModifiedUsed</a> &lt; <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#ae960fac4f2456059d850ea694f604ef7">m_situationsLastModified</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> newSplit = newSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a948bd927b80c9162e07fe063449acc9f">getAdjustedMSecsSinceEpoch</a>() &lt; <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#ae22716ccaae1ee4cad975cbed040b2e2">m_currentTimeMsSinceEpoch</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> recalculate = updated || newSplit;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">if</span> (recalculate)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#a901899e236b5d1ad0d536bc5cb551db7">m_situationsLastModifiedUsed</a> = <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#ae960fac4f2456059d850ea694f604ef7">m_situationsLastModified</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="comment">// find the first situation earlier than the current time</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> pivot = std::partition_point(<a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#aaaf5b7ffdd2e79a1d5402785c0380d22">m_currentSituations</a>.<a class="code" href="class_black_misc_1_1_c_sequence.html#ace39d84ae9c72783373bed4249843071">begin</a>(), <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#aaaf5b7ffdd2e79a1d5402785c0380d22">m_currentSituations</a>.<a class="code" href="class_black_misc_1_1_c_sequence.html#a0dcd997961a162fa011d4713a75b69ce">end</a>(), [=](<span class="keyword">auto</span> &amp;&amp;s) { return s.getAdjustedMSecsSinceEpoch() &gt; m_currentTimeMsSinceEpoch; });</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> situationsNewer = <a class="code" href="namespace_black_misc.html#ac8197b52b68b6bb994852291d240613f">makeRange</a>(<a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#aaaf5b7ffdd2e79a1d5402785c0380d22">m_currentSituations</a>.<a class="code" href="class_black_misc_1_1_c_sequence.html#ace39d84ae9c72783373bed4249843071">begin</a>(), pivot);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> situationsOlder = <a class="code" href="namespace_black_misc.html#ac8197b52b68b6bb994852291d240613f">makeRange</a>(pivot, <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#aaaf5b7ffdd2e79a1d5402785c0380d22">m_currentSituations</a>.<a class="code" href="class_black_misc_1_1_c_sequence.html#a0dcd997961a162fa011d4713a75b69ce">end</a>());</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="comment">// latest first, now 00:20 split time</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="comment">// time     pos</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="comment">// 00:25    10    newer</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="comment">// 00:20    11    newer</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="comment">// &lt;----- split</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="comment">// 00:15    12    older</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="comment">// 00:10    13    older</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="comment">// 00:05    14    older</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="comment">// The first condition covers a situation, when there are no before / after situations.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="comment">// We just place at the last position until we get before / after situations</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">if</span> (situationsOlder.isEmpty() || situationsNewer.isEmpty())</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="comment">// no before situations</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">if</span> (situationsOlder.isEmpty())</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                    <span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> currentSituation(*(situationsNewer.end() - 1)); <span class="comment">// oldest newest</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#a7231c86e3ccf92deac6d8edc3bb649a3">m_currentInterpolationStatus</a>.<a class="code" href="struct_black_misc_1_1_simulation_1_1_c_interpolation_status.html#ab1c0e58e2583fc75e442959c4b93ec1e">setInterpolatedAndCheckSituation</a>(<span class="keyword">false</span>, currentSituation);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    m_interpolant = { currentSituation };</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    <span class="keywordflow">return</span> m_interpolant;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="comment">// only one before situation</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="keywordflow">if</span> (situationsOlder.size() &lt; 2)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    <span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> currentSituation(situationsOlder.front()); <span class="comment">// latest oldest</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#a7231c86e3ccf92deac6d8edc3bb649a3">m_currentInterpolationStatus</a>.<a class="code" href="struct_black_misc_1_1_simulation_1_1_c_interpolation_status.html#ab1c0e58e2583fc75e442959c4b93ec1e">setInterpolatedAndCheckSituation</a>(<span class="keyword">false</span>, currentSituation);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    m_interpolant = { currentSituation };</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    <span class="keywordflow">return</span> m_interpolant;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                <span class="comment">// extrapolate from two before situations</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                oldSituation = *(situationsOlder.begin() + 1); <span class="comment">// before newest</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                newSituation = situationsOlder.front(); <span class="comment">// newest</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                oldSituation = situationsOlder.front(); <span class="comment">// first oldest (aka newest oldest)</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                newSituation = *(situationsNewer.end() - 1); <span class="comment">// latest newest (aka oldest of newer block)</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                Q_ASSERT(oldSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a948bd927b80c9162e07fe063449acc9f">getAdjustedMSecsSinceEpoch</a>() &lt; newSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a948bd927b80c9162e07fe063449acc9f">getAdjustedMSecsSinceEpoch</a>());</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="comment">// adjust ground if required</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">if</span> (!oldSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a09c6703655a7e441068eaca75e751ba7">canLikelySkipNearGroundInterpolation</a>() &amp;&amp; !oldSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a52c49e8dfc3efd2d4215ca11577f4677">hasGroundElevation</a>())</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_geo_1_1_c_elevation_plane.html">CElevationPlane</a> planeOld = this-&gt;<a class="code" href="class_black_misc_1_1_simulation_1_1_c_simulation_environment_aware.html#a884d37e30b5a0be76b917bb1e1fb201f">findClosestElevationWithinRange</a>(oldSituation, CElevationPlane::singlePointRadius());</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                oldSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#accd090133f5df802f71e88ffdedc0b97">setGroundElevationChecked</a>(planeOld, CAircraftSituation::FromCache);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">if</span> (!newSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a09c6703655a7e441068eaca75e751ba7">canLikelySkipNearGroundInterpolation</a>() &amp;&amp; !newSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a52c49e8dfc3efd2d4215ca11577f4677">hasGroundElevation</a>())</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <span class="keyword">const</span> <a class="code" href="class_black_misc_1_1_geo_1_1_c_elevation_plane.html">CElevationPlane</a> planeNew = this-&gt;<a class="code" href="class_black_misc_1_1_simulation_1_1_c_simulation_environment_aware.html#a884d37e30b5a0be76b917bb1e1fb201f">findClosestElevationWithinRange</a>(newSituation, CElevationPlane::singlePointRadius());</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                newSituation.<a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#accd090133f5df802f71e88ffdedc0b97">setGroundElevationChecked</a>(planeNew, CAircraftSituation::FromCache);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        } <span class="comment">// modified situations</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">CAircraftSituation</a> currentSituation(oldSituation); <span class="comment">// also sets ground elevation if available</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment">// Time between start and end packet</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keyword">const</span> qint64 sampleDeltaTimeMs = newSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a948bd927b80c9162e07fe063449acc9f">getAdjustedMSecsSinceEpoch</a>() - oldSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a948bd927b80c9162e07fe063449acc9f">getAdjustedMSecsSinceEpoch</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        Q_ASSERT_X(sampleDeltaTimeMs &gt;= 0, Q_FUNC_INFO, <span class="stringliteral">&quot;Negative delta time&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a94a883566c41338496d2682b140afed3">interpolator</a> = <span class="charliteral">&#39;l&#39;</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="comment">// Fraction of the deltaTime, ideally [0.0 - 1.0]</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">// &lt; 0 should not happen due to the split, &gt; 1 can happen if new values are delayed beyond split time</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">// 1) values &gt; 1 mean extrapolation</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">// 2) values &gt; 2 mean no new situations coming in</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> distanceToSplitTimeMs = newSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a948bd927b80c9162e07fe063449acc9f">getAdjustedMSecsSinceEpoch</a>() - <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#ae22716ccaae1ee4cad975cbed040b2e2">m_currentTimeMsSinceEpoch</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordtype">double</span> simulationTimeFraction = qMax(1.0 - (distanceToSplitTimeMs / sampleDeltaTimeMs), 0.0);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span> (simulationTimeFraction &gt;= 1.0)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            simulationTimeFraction = 1.0;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">if</span> (qAbs(distanceToSplitTimeMs) &gt; 100) { <a class="code" href="class_black_misc_1_1_c_log_message.html">CLogMessage</a>(<span class="keyword">this</span>).<a class="code" href="class_black_misc_1_1_c_message_base.html#a7381e2c842b9f4cd9e62801fbd2e19a6">debug</a>(u<span class="stringliteral">&quot;Distance to split: %1&quot;</span>) &lt;&lt; distanceToSplitTimeMs; }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> deltaTimeFractionMs = sampleDeltaTimeMs * simulationTimeFraction;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keyword">const</span> qint64 interpolatedTime = oldSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_based.html#ad06f91eab8248e1b62fff651cc73e26c">getMSecsSinceEpoch</a>() + qRound(deltaTimeFractionMs);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="comment">// Ref T297 adjust offset time, but this already the interpolated situation</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        currentSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a342672a55961349a03a0f01006f08157">setTimeOffsetMs</a>(oldSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#ae3f3161353bf3d848b3c661dad3f517f">getTimeOffsetMs</a>() + qRound((newSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#ae3f3161353bf3d848b3c661dad3f517f">getTimeOffsetMs</a>() - oldSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_with_offset_based.html#ae3f3161353bf3d848b3c661dad3f517f">getTimeOffsetMs</a>()) * simulationTimeFraction));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        currentSituation.<a class="code" href="class_black_misc_1_1_i_timestamp_based.html#a5a14940bef7bdb064be61c51990b1d49">setMSecsSinceEpoch</a>(interpolatedTime);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#a7231c86e3ccf92deac6d8edc3bb649a3">m_currentInterpolationStatus</a>.<a class="code" href="struct_black_misc_1_1_simulation_1_1_c_interpolation_status.html#ab1c0e58e2583fc75e442959c4b93ec1e">setInterpolatedAndCheckSituation</a>(<span class="keyword">true</span>, currentSituation);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#af1920f64079f797000280fcab6fde23d">doLogging</a>())</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a72c239e66c465ea61939d430e7adffae">tsCurrent</a> = <a class="code" href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#ae22716ccaae1ee4cad975cbed040b2e2">m_currentTimeMsSinceEpoch</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a25afc666d27f81a097a174e82af824a1">deltaSampleTimesMs</a> = sampleDeltaTimeMs;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a1b539909d825fd4de257bb69c14e9bae">simTimeFraction</a> = simulationTimeFraction;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a25afc666d27f81a097a174e82af824a1">deltaSampleTimesMs</a> = sampleDeltaTimeMs;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a7d0efcbbef6f4cbc8e5e2d53432010a3">tsInterpolated</a> = interpolatedTime;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a3b57ccadb56e531d0a858d08cb9f2f7d">interpolationSituations</a>.<a class="code" href="class_black_misc_1_1_c_sequence.html#ad47999b337703232f06ad8891e4bd16b">clear</a>();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a3b57ccadb56e531d0a858d08cb9f2f7d">interpolationSituations</a>.<a class="code" href="class_black_misc_1_1_c_sequence.html#a3b1a591f9338825e0364e940f8e06cb0">push_back</a>(oldSituation); <span class="comment">// oldest at front</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a3b57ccadb56e531d0a858d08cb9f2f7d">interpolationSituations</a>.<a class="code" href="class_black_misc_1_1_c_sequence.html#a3b1a591f9338825e0364e940f8e06cb0">push_back</a>(newSituation); <span class="comment">// latest at back</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            log.<a class="code" href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a5dabe80b367bcac2ed9268a0902d48cd">interpolantRecalc</a> = recalculate;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        m_interpolant = { oldSituation, newSituation, simulationTimeFraction, interpolatedTime };</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        m_interpolant.<a class="code" href="class_black_misc_1_1_simulation_1_1_i_interpolant.html#ac2d5d3c97068e07efb4cabd97c04c4d7">setRecalculated</a>(recalculate);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">return</span> m_interpolant;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;} <span class="comment">// namespace</span></div>
<div class="ttc" id="aaircraftsituationlist_8h_html"><div class="ttname"><a href="aircraftsituationlist_8h.html">aircraftsituationlist.h</a></div></div>
<div class="ttc" id="aaltitude_8h_html"><div class="ttname"><a href="altitude_8h.html">altitude.h</a></div></div>
<div class="ttc" id="abuildconfig_8h_html"><div class="ttname"><a href="buildconfig_8h.html">buildconfig.h</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_aircraft_situation_html"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html">BlackMisc::Aviation::CAircraftSituation</a></div><div class="ttdoc">Value object encapsulating information of an aircraft's situation.</div><div class="ttdef"><b>Definition:</b> <a href="aircraftsituation_8h_source.html#l00047">aircraftsituation.h:51</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_aircraft_situation_html_a09c6703655a7e441068eaca75e751ba7"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a09c6703655a7e441068eaca75e751ba7">BlackMisc::Aviation::CAircraftSituation::canLikelySkipNearGroundInterpolation</a></div><div class="ttdeci">bool canLikelySkipNearGroundInterpolation() const</div><div class="ttdoc">Situation looks like an aircraft not near ground.</div><div class="ttdef"><b>Definition:</b> <a href="aircraftsituation_8cpp_source.html#l00947">aircraftsituation.cpp:947</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_aircraft_situation_html_a4caaad75e021a0886dadbe0cc7f7a764"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a4caaad75e021a0886dadbe0cc7f7a764">BlackMisc::Aviation::CAircraftSituation::setAltitude</a></div><div class="ttdeci">void setAltitude(const CAltitude &amp;altitude)</div><div class="ttdoc">Set altitude.</div><div class="ttdef"><b>Definition:</b> <a href="aircraftsituation_8cpp_source.html#l00884">aircraftsituation.cpp:884</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_aircraft_situation_html_a52c49e8dfc3efd2d4215ca11577f4677"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a52c49e8dfc3efd2d4215ca11577f4677">BlackMisc::Aviation::CAircraftSituation::hasGroundElevation</a></div><div class="ttdeci">bool hasGroundElevation() const</div><div class="ttdoc">Is ground elevation value available.</div><div class="ttdef"><b>Definition:</b> <a href="aircraftsituation_8cpp_source.html#l00698">aircraftsituation.cpp:698</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_aircraft_situation_html_a8026481ec69927e07eefca92a24a3dff"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a8026481ec69927e07eefca92a24a3dff">BlackMisc::Aviation::CAircraftSituation::setOnGroundFromGroundFactorFromInterpolation</a></div><div class="ttdeci">bool setOnGroundFromGroundFactorFromInterpolation(double threshold=0.5)</div><div class="ttdoc">Set on ground as interpolated from ground fatcor.</div><div class="ttdef"><b>Definition:</b> <a href="aircraftsituation_8cpp_source.html#l00583">aircraftsituation.cpp:583</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_aircraft_situation_html_a82086dbfde39ef807697e67ae601ea32"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#a82086dbfde39ef807697e67ae601ea32">BlackMisc::Aviation::CAircraftSituation::setOnGround</a></div><div class="ttdeci">bool setOnGround(bool onGround)</div><div class="ttdoc">Set on ground.</div><div class="ttdef"><b>Definition:</b> <a href="aircraftsituation_8cpp_source.html#l00498">aircraftsituation.cpp:498</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_aircraft_situation_html_ab4ed2995ac0c67a2baf7e62029584c2a"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#ab4ed2995ac0c67a2baf7e62029584c2a">BlackMisc::Aviation::CAircraftSituation::setPosition</a></div><div class="ttdeci">void setPosition(const Geo::CCoordinateGeodetic &amp;position)</div><div class="ttdoc">Set position.</div><div class="ttdef"><b>Definition:</b> <a href="aircraftsituation_8h_source.html#l00201">aircraftsituation.h:201</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_aircraft_situation_html_accd090133f5df802f71e88ffdedc0b97"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#accd090133f5df802f71e88ffdedc0b97">BlackMisc::Aviation::CAircraftSituation::setGroundElevationChecked</a></div><div class="ttdeci">bool setGroundElevationChecked(const Geo::CElevationPlane &amp;elevationPlane, GndElevationInfo info, bool transferred=false)</div><div class="ttdoc">Set elevation of the ground directly beneath, but checked.</div><div class="ttdef"><b>Definition:</b> <a href="aircraftsituation_8cpp_source.html#l00751">aircraftsituation.cpp:751</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_aircraft_situation_html_aec3b4b98a9ebc1ce6a00dda39cd976b0"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_aircraft_situation.html#aec3b4b98a9ebc1ce6a00dda39cd976b0">BlackMisc::Aviation::CAircraftSituation::setOnGroundFactor</a></div><div class="ttdeci">void setOnGroundFactor(double groundFactor)</div><div class="ttdoc">Set on ground factor 0..1 (on ground), -1 not set.</div><div class="ttdef"><b>Definition:</b> <a href="aircraftsituation_8cpp_source.html#l00524">aircraftsituation.cpp:524</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_altitude_html"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_altitude.html">BlackMisc::Aviation::CAltitude</a></div><div class="ttdoc">Altitude as used in aviation, can be AGL or MSL altitude.</div><div class="ttdef"><b>Definition:</b> <a href="altitude_8h_source.html#l00038">altitude.h:51</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_aviation_1_1_c_altitude_html_acd8f6331ff366a7ca5c8c2117bb462a2"><div class="ttname"><a href="class_black_misc_1_1_aviation_1_1_c_altitude.html#acd8f6331ff366a7ca5c8c2117bb462a2">BlackMisc::Aviation::CAltitude::getReferenceDatum</a></div><div class="ttdeci">ReferenceDatum getReferenceDatum() const</div><div class="ttdoc">Get reference datum (MSL or AGL)</div><div class="ttdef"><b>Definition:</b> <a href="altitude_8h_source.html#l00133">altitude.h:133</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_c_log_message_html"><div class="ttname"><a href="class_black_misc_1_1_c_log_message.html">BlackMisc::CLogMessage</a></div><div class="ttdoc">Class for emitting a log message.</div><div class="ttdef"><b>Definition:</b> <a href="logmessage_8h_source.html#l00029">logmessage.h:30</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_c_message_base_html_a7381e2c842b9f4cd9e62801fbd2e19a6"><div class="ttname"><a href="class_black_misc_1_1_c_message_base.html#a7381e2c842b9f4cd9e62801fbd2e19a6">BlackMisc::CMessageBase::debug</a></div><div class="ttdeci">Derived &amp; debug()</div><div class="ttdoc">Set the severity to debug.</div><div class="ttdef"><b>Definition:</b> <a href="statusmessage_8h_source.html#l00191">statusmessage.h:191</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_c_sequence_html_a0dcd997961a162fa011d4713a75b69ce"><div class="ttname"><a href="class_black_misc_1_1_c_sequence.html#a0dcd997961a162fa011d4713a75b69ce">BlackMisc::CSequence::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdoc">Returns iterator one past the end of the sequence.</div><div class="ttdef"><b>Definition:</b> <a href="sequence_8h_source.html#l00173">sequence.h:173</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_c_sequence_html_a3b1a591f9338825e0364e940f8e06cb0"><div class="ttname"><a href="class_black_misc_1_1_c_sequence.html#a3b1a591f9338825e0364e940f8e06cb0">BlackMisc::CSequence::push_back</a></div><div class="ttdeci">void push_back(const T &amp;value)</div><div class="ttdoc">Appends an element at the end of the sequence.</div><div class="ttdef"><b>Definition:</b> <a href="sequence_8h_source.html#l00306">sequence.h:306</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_c_sequence_html_ace39d84ae9c72783373bed4249843071"><div class="ttname"><a href="class_black_misc_1_1_c_sequence.html#ace39d84ae9c72783373bed4249843071">BlackMisc::CSequence::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Returns iterator at the beginning of the sequence.</div><div class="ttdef"><b>Definition:</b> <a href="sequence_8h_source.html#l00164">sequence.h:164</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_c_sequence_html_ad47999b337703232f06ad8891e4bd16b"><div class="ttname"><a href="class_black_misc_1_1_c_sequence.html#ad47999b337703232f06ad8891e4bd16b">BlackMisc::CSequence::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Removes all elements in the sequence.</div><div class="ttdef"><b>Definition:</b> <a href="sequence_8h_source.html#l00289">sequence.h:289</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_geo_1_1_c_coordinate_geodetic_html"><div class="ttname"><a href="class_black_misc_1_1_geo_1_1_c_coordinate_geodetic.html">BlackMisc::Geo::CCoordinateGeodetic</a></div><div class="ttdoc">Geodetic coordinate.</div><div class="ttdef"><b>Definition:</b> <a href="coordinategeodetic_8h_source.html#l00220">coordinategeodetic.h:221</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_geo_1_1_c_coordinate_geodetic_html_a1791f565bcc91e7aecccaff0948e3c38"><div class="ttname"><a href="class_black_misc_1_1_geo_1_1_c_coordinate_geodetic.html#a1791f565bcc91e7aecccaff0948e3c38">BlackMisc::Geo::CCoordinateGeodetic::setNormalVector</a></div><div class="ttdeci">void setNormalVector(const QVector3D &amp;normal)</div><div class="ttdoc">Set normal vector.</div><div class="ttdef"><b>Definition:</b> <a href="coordinategeodetic_8h_source.html#l00302">coordinategeodetic.h:302</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_geo_1_1_c_elevation_plane_html"><div class="ttname"><a href="class_black_misc_1_1_geo_1_1_c_elevation_plane.html">BlackMisc::Geo::CElevationPlane</a></div><div class="ttdoc">Plane of same elevation, can be a single point or larger area (e.g. airport)</div><div class="ttdef"><b>Definition:</b> <a href="elevationplane_8h_source.html#l00017">elevationplane.h:21</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_geo_1_1_i_coordinate_geodetic_html_ac0ee15bb11f496969f5a523497a13824"><div class="ttname"><a href="class_black_misc_1_1_geo_1_1_i_coordinate_geodetic.html#ac0ee15bb11f496969f5a523497a13824">BlackMisc::Geo::ICoordinateGeodetic::isValidVectorRange</a></div><div class="ttdeci">bool isValidVectorRange() const</div><div class="ttdoc">Check values.</div><div class="ttdef"><b>Definition:</b> <a href="coordinategeodetic_8cpp_source.html#l00204">coordinategeodetic.cpp:204</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_i_timestamp_based_html_a5a14940bef7bdb064be61c51990b1d49"><div class="ttname"><a href="class_black_misc_1_1_i_timestamp_based.html#a5a14940bef7bdb064be61c51990b1d49">BlackMisc::ITimestampBased::setMSecsSinceEpoch</a></div><div class="ttdeci">void setMSecsSinceEpoch(qint64 mSecsSinceEpoch)</div><div class="ttdoc">Timestamp as ms value.</div><div class="ttdef"><b>Definition:</b> <a href="timestampbased_8h_source.html#l00065">timestampbased.h:65</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_i_timestamp_based_html_ad06f91eab8248e1b62fff651cc73e26c"><div class="ttname"><a href="class_black_misc_1_1_i_timestamp_based.html#ad06f91eab8248e1b62fff651cc73e26c">BlackMisc::ITimestampBased::getMSecsSinceEpoch</a></div><div class="ttdeci">qint64 getMSecsSinceEpoch() const</div><div class="ttdoc">Timestamp as ms value.</div><div class="ttdef"><b>Definition:</b> <a href="timestampbased_8h_source.html#l00041">timestampbased.h:41</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_i_timestamp_with_offset_based_html_a342672a55961349a03a0f01006f08157"><div class="ttname"><a href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a342672a55961349a03a0f01006f08157">BlackMisc::ITimestampWithOffsetBased::setTimeOffsetMs</a></div><div class="ttdeci">void setTimeOffsetMs(qint64 offset)</div><div class="ttdoc">Milliseconds to add to timestamp for interpolation.</div><div class="ttdef"><b>Definition:</b> <a href="timestampbased_8h_source.html#l00177">timestampbased.h:177</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_i_timestamp_with_offset_based_html_a948bd927b80c9162e07fe063449acc9f"><div class="ttname"><a href="class_black_misc_1_1_i_timestamp_with_offset_based.html#a948bd927b80c9162e07fe063449acc9f">BlackMisc::ITimestampWithOffsetBased::getAdjustedMSecsSinceEpoch</a></div><div class="ttdeci">qint64 getAdjustedMSecsSinceEpoch() const</div><div class="ttdoc">Timestamp with offset added for interpolation.</div><div class="ttdef"><b>Definition:</b> <a href="timestampbased_8h_source.html#l00192">timestampbased.h:192</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_i_timestamp_with_offset_based_html_ae3f3161353bf3d848b3c661dad3f517f"><div class="ttname"><a href="class_black_misc_1_1_i_timestamp_with_offset_based.html#ae3f3161353bf3d848b3c661dad3f517f">BlackMisc::ITimestampWithOffsetBased::getTimeOffsetMs</a></div><div class="ttdeci">qint64 getTimeOffsetMs() const</div><div class="ttdoc">Milliseconds to add to timestamp for interpolation.</div><div class="ttdef"><b>Definition:</b> <a href="timestampbased_8h_source.html#l00180">timestampbased.h:180</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_html_a5a93002b01193061db4ea1ae334faa92"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#a5a93002b01193061db4ea1ae334faa92">BlackMisc::Simulation::CInterpolator&lt; CInterpolatorLinear &gt;::groundInterpolationFactor</a></div><div class="ttdeci">static double groundInterpolationFactor()</div><div class="ttdoc">Decides threshold when situation is considered on ground.</div><div class="ttdef"><b>Definition:</b> <a href="interpolator_8cpp_source.html#l00275">interpolator.cpp:78</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_html_a7231c86e3ccf92deac6d8edc3bb649a3"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#a7231c86e3ccf92deac6d8edc3bb649a3">BlackMisc::Simulation::CInterpolator&lt; CInterpolatorLinear &gt;::m_currentInterpolationStatus</a></div><div class="ttdeci">CInterpolationStatus m_currentInterpolationStatus</div><div class="ttdoc">this step's situation status</div><div class="ttdef"><b>Definition:</b> <a href="interpolator_8h_source.html#l00286">interpolator.h:286</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_html_a901899e236b5d1ad0d536bc5cb551db7"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#a901899e236b5d1ad0d536bc5cb551db7">BlackMisc::Simulation::CInterpolator&lt; CInterpolatorLinear &gt;::m_situationsLastModifiedUsed</a></div><div class="ttdeci">qint64 m_situationsLastModifiedUsed</div><div class="ttdoc">interpolant based on situations last updated</div><div class="ttdef"><b>Definition:</b> <a href="interpolator_8h_source.html#l00299">interpolator.h:299</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_html_aaaf5b7ffdd2e79a1d5402785c0380d22"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#aaaf5b7ffdd2e79a1d5402785c0380d22">BlackMisc::Simulation::CInterpolator&lt; CInterpolatorLinear &gt;::m_currentSituations</a></div><div class="ttdeci">Aviation::CAircraftSituationList m_currentSituations</div><div class="ttdoc">current situations obtained by remoteAircraftSituationsAndChange</div><div class="ttdef"><b>Definition:</b> <a href="interpolator_8h_source.html#l00283">interpolator.h:283</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_html_ae22716ccaae1ee4cad975cbed040b2e2"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#ae22716ccaae1ee4cad975cbed040b2e2">BlackMisc::Simulation::CInterpolator&lt; CInterpolatorLinear &gt;::m_currentTimeMsSinceEpoch</a></div><div class="ttdeci">qint64 m_currentTimeMsSinceEpoch</div><div class="ttdoc">current time</div><div class="ttdef"><b>Definition:</b> <a href="interpolator_8h_source.html#l00281">interpolator.h:281</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_html_ae960fac4f2456059d850ea694f604ef7"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#ae960fac4f2456059d850ea694f604ef7">BlackMisc::Simulation::CInterpolator&lt; CInterpolatorLinear &gt;::m_situationsLastModified</a></div><div class="ttdeci">qint64 m_situationsLastModified</div><div class="ttdoc">when situations were last modified</div><div class="ttdef"><b>Definition:</b> <a href="interpolator_8h_source.html#l00298">interpolator.h:298</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_html_af1920f64079f797000280fcab6fde23d"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator.html#af1920f64079f797000280fcab6fde23d">BlackMisc::Simulation::CInterpolator&lt; CInterpolatorLinear &gt;::doLogging</a></div><div class="ttdeci">bool doLogging() const</div><div class="ttdoc">Do logging.</div><div class="ttdef"><b>Definition:</b> <a href="interpolator_8cpp_source.html#l00271">interpolator.cpp:512</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant_html"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html">BlackMisc::Simulation::CInterpolatorLinear::CInterpolant</a></div><div class="ttdoc">Linear function that performs the actual interpolation.</div><div class="ttdef"><b>Definition:</b> <a href="interpolatorlinear_8h_source.html#l00039">interpolatorlinear.h:40</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant_html_a08625e48c29fe0044e3ea6d27240760c"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a08625e48c29fe0044e3ea6d27240760c">BlackMisc::Simulation::CInterpolatorLinear::CInterpolant::CInterpolant</a></div><div class="ttdeci">CInterpolant()</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="interpolatorlinear_8h_source.html#l00044">interpolatorlinear.h:44</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant_html_a3dd85a466ed567366820d57806296eee"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a3dd85a466ed567366820d57806296eee">BlackMisc::Simulation::CInterpolatorLinear::CInterpolant::getNewSituation</a></div><div class="ttdeci">const Aviation::CAircraftSituation &amp; getNewSituation() const</div><div class="ttdoc">New situation.</div><div class="ttdef"><b>Definition:</b> <a href="interpolatorlinear_8h_source.html#l00057">interpolatorlinear.h:57</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant_html_a4471c241d6980948c7d4b3d2c648e2b7"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a4471c241d6980948c7d4b3d2c648e2b7">BlackMisc::Simulation::CInterpolatorLinear::CInterpolant::getOldSituation</a></div><div class="ttdeci">const Aviation::CAircraftSituation &amp; getOldSituation() const</div><div class="ttdoc">Old situation.</div><div class="ttdef"><b>Definition:</b> <a href="interpolatorlinear_8h_source.html#l00054">interpolatorlinear.h:54</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant_html_a8f132cd55b91b41ea95c4bd54967089e"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear_1_1_c_interpolant.html#a8f132cd55b91b41ea95c4bd54967089e">BlackMisc::Simulation::CInterpolatorLinear::CInterpolant::interpolatePositionAndAltitude</a></div><div class="ttdeci">Aviation::CAircraftSituation interpolatePositionAndAltitude(const Aviation::CAircraftSituation &amp;situation, bool interpolateGndFactor) const</div><div class="ttdoc">Perform the interpolation.</div><div class="ttdef"><b>Definition:</b> <a href="interpolatorlinear_8cpp_source.html#l00050">interpolatorlinear.cpp:50</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_linear_html_ae2619f905243c3f9cfbbb3470f28ae79"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator_linear.html#ae2619f905243c3f9cfbbb3470f28ae79">BlackMisc::Simulation::CInterpolatorLinear::getInterpolant</a></div><div class="ttdeci">CInterpolant getInterpolant(SituationLog &amp;log)</div><div class="ttdoc">Get the interpolant for the given time point.</div><div class="ttdef"><b>Definition:</b> <a href="interpolatorlinear_8cpp_source.html#l00112">interpolatorlinear.cpp:112</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_interpolator_pbh_html"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_interpolator_pbh.html">BlackMisc::Simulation::CInterpolatorPbh</a></div><div class="ttdoc">Simple interpolator for pitch, bank, heading, groundspeed.</div><div class="ttdef"><b>Definition:</b> <a href="interpolatorpbh_8h_source.html#l00018">interpolatorpbh.h:19</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_c_simulation_environment_aware_html_a884d37e30b5a0be76b917bb1e1fb201f"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_c_simulation_environment_aware.html#a884d37e30b5a0be76b917bb1e1fb201f">BlackMisc::Simulation::CSimulationEnvironmentAware::findClosestElevationWithinRange</a></div><div class="ttdeci">Geo::CElevationPlane findClosestElevationWithinRange(const Geo::ICoordinateGeodetic &amp;reference, const PhysicalQuantities::CLength &amp;range) const</div><div class="ttdoc">Find closest elevation (or return NULL)</div><div class="ttdef"><b>Definition:</b> <a href="simulationenvironmentprovider_8cpp_source.html#l00718">simulationenvironmentprovider.cpp:718</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_i_interpolant_html"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_i_interpolant.html">BlackMisc::Simulation::IInterpolant</a></div><div class="ttdoc">Interpolant interface.</div><div class="ttdef"><b>Definition:</b> <a href="interpolant_8h_source.html#l00014">interpolant.h:15</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_i_interpolant_html_ac2d5d3c97068e07efb4cabd97c04c4d7"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_i_interpolant.html#ac2d5d3c97068e07efb4cabd97c04c4d7">BlackMisc::Simulation::IInterpolant::setRecalculated</a></div><div class="ttdeci">void setRecalculated(bool reCalculated)</div><div class="ttdoc">Set recalculated interpolant.</div><div class="ttdef"><b>Definition:</b> <a href="interpolant_8h_source.html#l00036">interpolant.h:36</a></div></div>
<div class="ttc" id="aclass_black_misc_1_1_simulation_1_1_i_interpolant_html_aec959c740235d091e11bb0e7b8e9becb"><div class="ttname"><a href="class_black_misc_1_1_simulation_1_1_i_interpolant.html#aec959c740235d091e11bb0e7b8e9becb">BlackMisc::Simulation::IInterpolant::m_pbh</a></div><div class="ttdeci">CInterpolatorPbh m_pbh</div><div class="ttdoc">the used PBH interpolator</div><div class="ttdef"><b>Definition:</b> <a href="interpolant_8h_source.html#l00050">interpolant.h:50</a></div></div>
<div class="ttc" id="acoordinategeodetic_8h_html"><div class="ttname"><a href="coordinategeodetic_8h.html">coordinategeodetic.h</a></div></div>
<div class="ttc" id="ainterpolatorfunctions_8h_html"><div class="ttname"><a href="interpolatorfunctions_8h.html">interpolatorfunctions.h</a></div></div>
<div class="ttc" id="ainterpolatorfunctions_8h_html_a57fda3473712311e6d1d58a44ab1c5d6"><div class="ttname"><a href="interpolatorfunctions_8h.html#a57fda3473712311e6d1d58a44ab1c5d6">BlackMisc::Simulation::clampValidTimeFraction</a></div><div class="ttdeci">double clampValidTimeFraction(double timeFraction)</div><div class="ttdoc">Clamp time fraction [0,1].</div><div class="ttdef"><b>Definition:</b> <a href="interpolatorfunctions_8h_source.html#l00024">interpolatorfunctions.h:24</a></div></div>
<div class="ttc" id="ainterpolatorfunctions_8h_html_aaccfd87f8e523ec78e59fbe4a7bf6ed1"><div class="ttname"><a href="interpolatorfunctions_8h.html#aaccfd87f8e523ec78e59fbe4a7bf6ed1">BlackMisc::Simulation::isAcceptableTimeFraction</a></div><div class="ttdeci">bool isAcceptableTimeFraction(double timeFraction)</div><div class="ttdoc">Valid time fraction [0,1], this allows minor overshooting.</div><div class="ttdef"><b>Definition:</b> <a href="interpolatorfunctions_8h_source.html#l00018">interpolatorfunctions.h:18</a></div></div>
<div class="ttc" id="ainterpolatorlinear_8h_html"><div class="ttname"><a href="interpolatorlinear_8h.html">interpolatorlinear.h</a></div></div>
<div class="ttc" id="alength_8h_html"><div class="ttname"><a href="length_8h.html">length.h</a></div></div>
<div class="ttc" id="alogmessage_8h_html"><div class="ttname"><a href="logmessage_8h.html">logmessage.h</a></div></div>
<div class="ttc" id="amixincompare_8h_html"><div class="ttname"><a href="mixincompare_8h.html">mixincompare.h</a></div></div>
<div class="ttc" id="anamespace_black_misc_html_ac8197b52b68b6bb994852291d240613f"><div class="ttname"><a href="namespace_black_misc.html#ac8197b52b68b6bb994852291d240613f">BlackMisc::makeRange</a></div><div class="ttdeci">auto makeRange(I begin, I2 end) -&gt; CRange&lt; I &gt;</div><div class="ttdoc">Returns a CRange constructed from begin and end iterators of deduced types.</div><div class="ttdef"><b>Definition:</b> <a href="range_8h_source.html#l00309">range.h:309</a></div></div>
<div class="ttc" id="aphysicalquantity_8h_html"><div class="ttname"><a href="physicalquantity_8h.html">physicalquantity.h</a></div></div>
<div class="ttc" id="arange_8h_html"><div class="ttname"><a href="range_8h.html">range.h</a></div></div>
<div class="ttc" id="asequence_8h_html"><div class="ttname"><a href="sequence_8h.html">sequence.h</a></div></div>
<div class="ttc" id="astatusmessage_8h_html"><div class="ttname"><a href="statusmessage_8h.html">statusmessage.h</a></div></div>
<div class="ttc" id="astruct_black_misc_1_1_simulation_1_1_c_interpolation_status_html_ab1c0e58e2583fc75e442959c4b93ec1e"><div class="ttname"><a href="struct_black_misc_1_1_simulation_1_1_c_interpolation_status.html#ab1c0e58e2583fc75e442959c4b93ec1e">BlackMisc::Simulation::CInterpolationStatus::setInterpolatedAndCheckSituation</a></div><div class="ttdeci">void setInterpolatedAndCheckSituation(bool succeeded, const Aviation::CAircraftSituation &amp;situation)</div><div class="ttdoc">Set succeeded.</div><div class="ttdef"><b>Definition:</b> <a href="interpolator_8cpp_source.html#l00832">interpolator.cpp:832</a></div></div>
<div class="ttc" id="astruct_black_misc_1_1_simulation_1_1_situation_log_html"><div class="ttname"><a href="struct_black_misc_1_1_simulation_1_1_situation_log.html">BlackMisc::Simulation::SituationLog</a></div><div class="ttdoc">Log entry for situation interpolation.</div><div class="ttdef"><b>Definition:</b> <a href="interpolationlogger_8h_source.html#l00026">interpolationlogger.h:27</a></div></div>
<div class="ttc" id="astruct_black_misc_1_1_simulation_1_1_situation_log_html_a1b539909d825fd4de257bb69c14e9bae"><div class="ttname"><a href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a1b539909d825fd4de257bb69c14e9bae">BlackMisc::Simulation::SituationLog::simTimeFraction</a></div><div class="ttdeci">double simTimeFraction</div><div class="ttdoc">time fraction, expected 0..1</div><div class="ttdef"><b>Definition:</b> <a href="interpolationlogger_8h_source.html#l00032">interpolationlogger.h:32</a></div></div>
<div class="ttc" id="astruct_black_misc_1_1_simulation_1_1_situation_log_html_a25afc666d27f81a097a174e82af824a1"><div class="ttname"><a href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a25afc666d27f81a097a174e82af824a1">BlackMisc::Simulation::SituationLog::deltaSampleTimesMs</a></div><div class="ttdeci">double deltaSampleTimesMs</div><div class="ttdoc">delta time between samples (i.e.</div><div class="ttdef"><b>Definition:</b> <a href="interpolationlogger_8h_source.html#l00033">interpolationlogger.h:33</a></div></div>
<div class="ttc" id="astruct_black_misc_1_1_simulation_1_1_situation_log_html_a3b57ccadb56e531d0a858d08cb9f2f7d"><div class="ttname"><a href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a3b57ccadb56e531d0a858d08cb9f2f7d">BlackMisc::Simulation::SituationLog::interpolationSituations</a></div><div class="ttdeci">Aviation::CAircraftSituationList interpolationSituations</div><div class="ttdoc">the interpolator uses 2, 3 situations (latest at end)</div><div class="ttdef"><b>Definition:</b> <a href="interpolationlogger_8h_source.html#l00043">interpolationlogger.h:43</a></div></div>
<div class="ttc" id="astruct_black_misc_1_1_simulation_1_1_situation_log_html_a5dabe80b367bcac2ed9268a0902d48cd"><div class="ttname"><a href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a5dabe80b367bcac2ed9268a0902d48cd">BlackMisc::Simulation::SituationLog::interpolantRecalc</a></div><div class="ttdeci">bool interpolantRecalc</div><div class="ttdoc">interpolant recalculated</div><div class="ttdef"><b>Definition:</b> <a href="interpolationlogger_8h_source.html#l00036">interpolationlogger.h:36</a></div></div>
<div class="ttc" id="astruct_black_misc_1_1_simulation_1_1_situation_log_html_a72c239e66c465ea61939d430e7adffae"><div class="ttname"><a href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a72c239e66c465ea61939d430e7adffae">BlackMisc::Simulation::SituationLog::tsCurrent</a></div><div class="ttdeci">qint64 tsCurrent</div><div class="ttdoc">current timestamp</div><div class="ttdef"><b>Definition:</b> <a href="interpolationlogger_8h_source.html#l00029">interpolationlogger.h:29</a></div></div>
<div class="ttc" id="astruct_black_misc_1_1_simulation_1_1_situation_log_html_a7d0efcbbef6f4cbc8e5e2d53432010a3"><div class="ttname"><a href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a7d0efcbbef6f4cbc8e5e2d53432010a3">BlackMisc::Simulation::SituationLog::tsInterpolated</a></div><div class="ttdeci">qint64 tsInterpolated</div><div class="ttdoc">timestamp interpolated</div><div class="ttdef"><b>Definition:</b> <a href="interpolationlogger_8h_source.html#l00030">interpolationlogger.h:30</a></div></div>
<div class="ttc" id="astruct_black_misc_1_1_simulation_1_1_situation_log_html_a94a883566c41338496d2682b140afed3"><div class="ttname"><a href="struct_black_misc_1_1_simulation_1_1_situation_log.html#a94a883566c41338496d2682b140afed3">BlackMisc::Simulation::SituationLog::interpolator</a></div><div class="ttdeci">QChar interpolator</div><div class="ttdoc">what interpolator is used</div><div class="ttdef"><b>Definition:</b> <a href="interpolationlogger_8h_source.html#l00028">interpolationlogger.h:28</a></div></div>
<div class="ttc" id="averify_8h_html"><div class="ttname"><a href="verify_8h.html">verify.h</a></div></div>
<div class="ttc" id="averify_8h_html_a720f9510406624948c10311879e88e17"><div class="ttname"><a href="verify_8h.html#a720f9510406624948c10311879e88e17">BLACK_VERIFY_X</a></div><div class="ttdeci">#define BLACK_VERIFY_X(COND, WHERE, WHAT)</div><div class="ttdoc">A weaker kind of assert.</div><div class="ttdef"><b>Definition:</b> <a href="verify_8h_source.html#l00025">verify.h:25</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Dec 3 2023 17:47:27 for swift by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
